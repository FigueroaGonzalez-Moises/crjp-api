(this["webpackJsonpproducts-api-ui"]=this["webpackJsonpproducts-api-ui"]||[]).push([[0],{114:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var c,a,r,s,i,o,d,l,u,j,b,p,m,h,O=n(91),x=n.n(O),g=n(12),v=n.n(g),f=n(20),N=n(6),w=n(3),y="",k=function(e){y=e},C=function(){return y},_=n(35),F=n(103),S=n(14),P=n(56),$=n(1),q=function(){var e=C();if(!e)return!1;try{var t=Object(P.a)(e).exp;return!(Date.now()>=1e3*t)}catch(n){return!1}},A=function(e){var t=e.component,n=Object(F.a)(e,["component"]);return Object($.jsx)(S.b,Object(_.a)(Object(_.a)({},n),{},{render:function(e){return q()?Object($.jsx)(t,Object(_.a)({},e)):Object($.jsx)(S.a,{to:"/dashboard"})}}))},E=(n(114),function(){return Object($.jsx)("div",{children:Object($.jsx)("nav",{className:"white z-depth-0",style:{borderBottom:"1px solid #dfe0e6"},children:Object($.jsx)("div",{className:"nav-wrapper",children:Object($.jsx)("div",{className:"row",style:{display:"flex",justifyContent:"center"},children:Object($.jsxs)("ul",{id:"nav-mobile",className:"center ",children:[Object($.jsx)("li",{children:Object($.jsx)("a",{className:"black-text",href:"#/orders",children:"Orders"})}),Object($.jsx)("li",{children:Object($.jsx)("a",{className:"black-text",href:"#/products",children:"Products"})}),Object($.jsx)("li",{children:Object($.jsx)("a",{className:"black-text",href:"#/coupons",children:"Coupons"})}),Object($.jsx)("li",{children:Object($.jsx)("a",{className:"black-text",href:"#/announcements",children:"Announcements"})})]})})})})})}),T=function(e){var t=e.children;return Object($.jsxs)("div",{className:"pageWrapper",children:[Object($.jsx)(E,{}),t||Object($.jsx)($.Fragment,{})]})},L=n(26),I=n(7),D=Object(I.gql)(c||(c=Object(L.a)(["\n    mutation addAnnouncement($text: String!) {\n  addAnnouncement(text: $text)\n}\n    "])));var B=Object(I.gql)(a||(a=Object(L.a)(["\n    mutation addCoupon($coupon_name: String!, $discount: String!) {\n  addCoupon(coupon_name: $coupon_name, discount: $discount)\n}\n    "])));var z=Object(I.gql)(r||(r=Object(L.a)(["\n    mutation addImgToProduct($img_url: String!, $product_id: Float!) {\n  addImgToProduct(img_url: $img_url, product_id: $product_id)\n}\n    "])));var R=Object(I.gql)(s||(s=Object(L.a)(["\n    mutation addProduct($name: String!, $desc: String!, $price: Float!, $stock: Float!) {\n  addProduct(name: $name, desc: $desc, price: $price, stock: $stock)\n}\n    "])));var H=Object(I.gql)(i||(i=Object(L.a)(["\n    mutation apiLogin($username: String!, $password: String!) {\n  apiLogin(username: $username, password: $password) {\n    accessToken\n    refreshToken\n  }\n}\n    "])));var Q=Object(I.gql)(o||(o=Object(L.a)(["\n    mutation deleteAnnouncement($id: String!) {\n  deleteAnnouncement(id: $id)\n}\n    "])));var W=Object(I.gql)(d||(d=Object(L.a)(["\n    mutation deleteCoupon($coupon_name: String!) {\n  deleteCoupon(coupon_name: $coupon_name)\n}\n    "])));var X=Object(I.gql)(l||(l=Object(L.a)(["\n    mutation deleteProduct($product_id: Float!) {\n  deleteProduct(product_id: $product_id)\n}\n    "])));var U=Object(I.gql)(u||(u=Object(L.a)(["\n    query getAnnouncements {\n  getAnnouncements {\n    id\n    text\n  }\n}\n    "])));var J=Object(I.gql)(j||(j=Object(L.a)(["\n    query getCoupons {\n  getCoupons {\n    coupon_name\n    coupon_id\n    discount\n  }\n}\n    "])));var G=Object(I.gql)(b||(b=Object(L.a)(["\n    query getOrders {\n  getOrders {\n    products {\n      product_id\n      name\n      desc\n      price\n      stock\n      exp_date\n    }\n    order_id\n    tracking_num\n  }\n}\n    "])));var K=Object(I.gql)(p||(p=Object(L.a)(["\n    query getProduct($product_id: Float!) {\n  getProduct(product_id: $product_id) {\n    product_id\n    name\n    desc\n    price\n    stock\n    exp_date\n    images {\n      img_id\n      img_url\n    }\n  }\n}\n    "])));var V=Object(I.gql)(m||(m=Object(L.a)(["\n    query getProducts {\n  getProducts {\n    product_id\n    name\n    desc\n    price\n    stock\n    exp_date\n    images {\n      img_id\n      img_url\n    }\n  }\n}\n    "])));var Y=Object(I.gql)(h||(h=Object(L.a)(["\n    mutation updateProduct($product_id: Float!, $name: String!, $desc: String!, $price: Float!, $stock: Float!) {\n  updateProduct(\n    product_id: $product_id\n    name: $name\n    desc: $desc\n    price: $price\n    stock: $stock\n  )\n}\n    "])));var Z=n(61),ee=n(60),te=n.n(ee),ne=function(){var e,t=I.useMutation(R,e),n=Object(N.a)(t,1)[0],c=function(e){return I.useMutation(z,e)}(),a=Object(N.a)(c,1)[0],r=Object(w.useState)(""),s=Object(N.a)(r,2),i=s[0],o=s[1],d=Object(w.useState)(""),l=Object(N.a)(d,2),u=l[0],j=l[1],b=Object(w.useState)(""),p=Object(N.a)(b,2),m=p[0],h=p[1],O=Object(w.useState)(""),x=Object(N.a)(O,2),g=x[0],y=x[1],k=Object(w.useState)([]),C=Object(N.a)(k,2),F=C[0],S=C[1],P=Object(w.useState)(!1),q=Object(N.a)(P,2),A=q[0],E=q[1],T=function(){var e=Object(f.a)(v.a.mark((function e(){var t,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&u&&m&&g){e.next=11;break}document.getElementById("name").classList.remove("invalid"),document.getElementById("desc").classList.remove("invalid"),document.getElementById("price").classList.remove("invalid"),document.getElementById("stock").classList.remove("invalid"),i||document.getElementById("name").classList.add("invalid"),u||document.getElementById("desc").classList.add("invalid"),m||document.getElementById("price").classList.add("invalid"),g||document.getElementById("stock").classList.add("invalid"),e.next=22;break;case 11:return e.next=13,n({variables:{name:i,desc:u,price:Number(m),stock:Number(g)}});case 13:t=e.sent,console.log("product_id",t),c=0;case 16:if(!(c<F.length)){e.next=22;break}return e.next=19,a({variables:{img_url:F[c],product_id:Number(t.data.addProduct)}});case 19:c++,e.next=16;break;case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log("image_urls :>> ",F),Object($.jsxs)("div",{className:"container",style:{width:"50%"},children:[Object($.jsx)("div",{className:"row",children:Object($.jsx)("h5",{children:"Add A Product"})}),Object($.jsxs)("form",{children:[Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"name",type:"text",value:i,onChange:function(e){return o(e.target.value)}}),Object($.jsx)("label",{htmlFor:"name",children:"Name"}),Object($.jsx)("span",{className:"helper-text","data-error":"Please enter a product name"})]})}),Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("textarea",{id:"desc",value:u,className:"materialize-textarea",onChange:function(e){return j(e.target.value)}}),Object($.jsx)("label",{htmlFor:"desc",children:"Description"}),Object($.jsx)("span",{className:"helper-text","data-error":"Please enter a product description"})]})}),Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"price",type:"text",value:m,onChange:function(e){e.target.value||h(e.target.value),e.target.value.match(/\d/g)&&h(e.target.value)}}),Object($.jsx)("label",{htmlFor:"price",children:"Price"}),Object($.jsx)("span",{className:"helper-text","data-error":"Please enter a product price"})]})}),Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"stock",type:"text",value:g,onChange:function(e){e.target.value||y(e.target.value),e.target.value.match(/\d/g)&&y(e.target.value)}}),Object($.jsx)("label",{htmlFor:"stock",children:"Stock"}),Object($.jsx)("span",{className:"helper-text","data-error":"Please enter a stock amount"})]})}),Object($.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object($.jsx)("button",{className:"btn green",onClick:function(){return T()},children:"Submit"})})]}),Object($.jsx)(Z.a,{onDrop:function(){var e=Object(f.a)(v.a.mark((function e(t){var n,c,a,r,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(N.a)(t,1),c=n[0],console.log("file :>> ",c),(a=new FormData).append("api_key","767632178961832"),a.append("file",c),a.append("tags","codeinfuse, medium, gist"),a.append("upload_preset","re5zmdqn"),r=Date.now()/1e3|0,a.append("timestamp","".concat(r)),e.next=11,te.a.post("https://api.cloudinary.com/v1_1/desimqzzy/image/upload",a,{headers:{"X-Requested-With":"XMLHttpRequest"}});case 11:s=e.sent,console.log("res :>> ",s),(i=F).push(s.data.secure_url),S(i),E(!A);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object($.jsxs)("div",Object(_.a)(Object(_.a)({},t()),{},{children:[Object($.jsx)("input",Object(_.a)({},n())),"DO NOT DOUBLE CLICK PHOTO! SELECT PHOTO THEN PRESS OPEN"]}))}}),0===F.length?Object($.jsx)($.Fragment,{}):Object($.jsx)($.Fragment,{children:F.map((function(e,t){return console.log("test"),Object($.jsx)("img",{src:F[t]})}))})]})},ce=n(18),ae=n.n(ce),re=function(){var e,t=I.useQuery(U,e),n=t.data,c=t.loading,a=function(e){return I.useMutation(D,e)}(),r=Object(N.a)(a,1)[0],s=function(e){return I.useMutation(Q,e)}(),i=Object(N.a)(s,1)[0],o=Object(w.useState)(!1),d=Object(N.a)(o,2),l=d[0],u=d[1],j=Object(w.useState)(""),b=Object(N.a)(j,2),p=b[0],m=b[1];if(Object(w.useEffect)((function(){ae.a.AutoInit()})),c)return Object($.jsx)($.Fragment,{children:"...loading"});console.log("data :>> ",n);var h=n.getAnnouncements;return console.log("announcements.length :>> ",h.length),Object($.jsxs)("div",{className:"container",children:[Object($.jsx)("h1",{className:"center-align",children:"Announcements"}),0===h.length?Object($.jsx)("h4",{className:"center-align",children:"NONE"}):Object($.jsx)($.Fragment,{children:h.map((function(e,t){return Object($.jsxs)("div",{className:"container",style:{display:"flex",justifyContent:"space-between"},children:[Object($.jsx)("h4",{className:"center-align",children:h[t].text}),Object($.jsx)("i",{className:"material-icons red-text",onClick:Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i({variables:{id:h[t].id}});case 3:window.location.reload(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),ae.a.toast({html:"An error occured"}),ae.a.toast({html:"Could not add Announcement"});case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"delete"})]})}))}),Object($.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object($.jsx)("button",{className:"btn",onClick:function(){u(!0)},children:"Add an Announcement"})}),l?Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"text_1",className:"validate",value:p,onChange:function(e){return m(e.target.value)}}),Object($.jsx)("label",{htmlFor:"text_1",children:"Announcement Text"})]}),Object($.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object($.jsx)("button",{className:"btn green",onClick:Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=11;break}return e.prev=1,e.next=4,r({variables:{text:p}});case 4:window.location.reload(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),ae.a.toast({html:"An error occured"}),ae.a.toast({html:"Could not add Announcement"});case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),children:"Confirm"})})]}):Object($.jsx)($.Fragment,{})]})},se=function(){var e,t=I.useQuery(J,e),n=t.data,c=t.loading,a=function(e){return I.useMutation(B,e)}(),r=Object(N.a)(a,1)[0],s=function(e){return I.useMutation(W,e)}(),i=Object(N.a)(s,1)[0],o=Object(w.useState)(""),d=Object(N.a)(o,2),l=d[0],u=d[1],j=Object(w.useState)(""),b=Object(N.a)(j,2),p=b[0],m=b[1],h=Object(w.useState)(!1),O=Object(N.a)(h,2),x=O[0],g=O[1],y=Object(w.useState)(!1),k=Object(N.a)(y,2),C=k[0],_=k[1];return Object(w.useEffect)((function(){var e=document.querySelectorAll(".modal");ae.a.Modal.init(e),e=document.querySelectorAll(".dropdown-trigger"),ae.a.Dropdown.init(e)})),c?Object($.jsx)($.Fragment,{children:"...loading"}):(console.log("data :>> ",n),Object($.jsxs)("div",{className:"container",children:[Object($.jsx)("h1",{className:"center-align",children:"Active Coupons"}),0===(null===n||void 0===n?void 0:n.getCoupons.length)?Object($.jsx)("h4",{className:"center-align",children:"NONE"}):Object($.jsx)($.Fragment,{children:null===n||void 0===n?void 0:n.getCoupons.map((function(e,t){return Object($.jsx)($.Fragment,{children:Object($.jsxs)("div",{className:"container",style:{display:"flex",justifyContent:"space-between"},children:[Object($.jsx)("h4",{className:"center-align",children:n.getCoupons[t].coupon_name}),Object($.jsxs)("h4",{className:"center-align",children:["-",n.getCoupons[t].discount?n.getCoupons[t].discount:0,"%"]}),Object($.jsx)("i",{className:"material-icons red-text",onClick:Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{coupon_name:n.getCoupons[t].coupon_name}});case 2:e.sent.data.deleteCoupon?window.location.reload():(ae.a.toast({html:"An error occured"}),ae.a.toast({html:"Could not delete coupon"}));case 4:case"end":return e.stop()}}),e)}))),children:"delete"})]})})}))}),Object($.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object($.jsx)("button",{className:"btn black",onClick:function(){g(!0)},children:"Add a coupon"})}),x?Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginTop:"24px"},children:Object($.jsx)("a",{className:"dropdown-trigger btn black",href:"#","data-target":"dropdown1",children:C?Object($.jsx)($.Fragment,{children:"Coupon Type: Free Shipping"}):Object($.jsx)($.Fragment,{children:"Coupon Type: Discount"})})}),Object($.jsxs)("ul",{id:"dropdown1",className:"dropdown-content",children:[Object($.jsx)("li",{onClick:function(){_(!1)},children:"discount"}),Object($.jsx)("li",{onClick:function(){_(!0)},children:"free shipping"})]}),Object($.jsxs)("div",{className:"row",style:{marginTop:"32px"},children:[Object($.jsx)("div",{className:"col s6",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"coupon_name",type:"text",className:"validate",value:l,onChange:function(e){return u(e.target.value)}}),Object($.jsx)("label",{htmlFor:"coupon_name",children:"Coupon Name"}),Object($.jsx)("span",{className:"helper-text","data-error":"Please enter a coupon name"})]})}),Object($.jsx)("div",{className:"col s6",children:C?Object($.jsx)($.Fragment,{}):Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"discount",type:"text",className:"validate",minLength:0,maxLength:2,value:p,onChange:function(e){e.target.value||m("0"),e.target.value.match(/\d/g)&&m(e.target.value)}}),Object($.jsx)("label",{htmlFor:"discount",children:"Discount(Percentage in Numbers)"}),Object($.jsx)("span",{className:"helper-text","data-error":"Please enter a discount amount"})]})})]}),Object($.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object($.jsx)("button",{className:"btn green center-align",onClick:Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==l.length&&0!==p.length){e.next=5;break}0===l.length&&document.getElementById("coupon_name").classList.add("invalid"),C||0!==p.length||document.getElementById("discount").classList.add("invalid"),e.next=16;break;case 5:if(C){e.next=12;break}return e.next=8,r({variables:{coupon_name:l,discount:p}});case 8:e.sent.data.addCoupon?window.location.reload():(ae.a.toast({html:"An error occured"}),ae.a.toast({html:"Could not add coupon"})),e.next=16;break;case 12:return e.next=14,r({variables:{coupon_name:l,discount:"FREE_SHIPPING"}});case 14:e.sent.data.addCoupon?window.location.reload():(ae.a.toast({html:"An error occured"}),ae.a.toast({html:"Could not add coupon"}));case 16:case"end":return e.stop()}}),e)}))),children:"confirm"})})]}):Object($.jsx)($.Fragment,{})]}))},ie=function(){return Number(window.location.href.split(":")[2])},oe=function(){var e,t=ie(),n=(e={variables:{product_id:t}},I.useQuery(K,e)),c=n.data,a=n.loading,r=n.error,s=function(e){return I.useMutation(Y,e)}(),i=Object(N.a)(s,1)[0],o=function(e){return I.useMutation(X,e)}(),d=Object(N.a)(o,1)[0],l=Object(w.useState)(""),u=Object(N.a)(l,2),j=u[0],b=u[1],p=Object(w.useState)(""),m=Object(N.a)(p,2),h=m[0],O=m[1],x=Object(w.useState)(""),g=Object(N.a)(x,2),y=g[0],k=g[1],C=Object(w.useState)(""),F=Object(N.a)(C,2),P=F[0],q=F[1],A=[""];if(a)return Object($.jsx)($.Fragment,{children:"...loading"});if(r)return Object($.jsx)(S.a,{to:"#/products"});var E=function(){var e=Object(f.a)(v.a.mark((function e(){var n,c,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j,c=h,a=Number(y),r=Number(P),j||(n=T.name),h||(c=T.desc),y||(a=T.price),P||(r=T.stock),e.next=7,i({variables:{product_id:t,name:n,desc:c,price:a,stock:r}});case 7:return console.log("test"),e.abrupt("return",Object($.jsx)(S.a,{to:"#/products"}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=c.getProduct;return Object($.jsxs)("div",{className:"container",style:{width:"50%"},children:[Object($.jsx)("div",{className:"row",children:Object($.jsx)("h5",{children:"Edit Product"})}),Object($.jsxs)("form",{children:[Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"name",type:"text",value:j,onChange:function(e){b(e.target.value)}}),Object($.jsx)("label",{id:"name-label",htmlFor:"name",children:T.name})]})}),Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("textarea",{id:"desc",value:h,className:"materialize-textarea",onChange:function(e){return O(e.target.value)}}),Object($.jsx)("label",{htmlFor:"desc",children:T.desc})]})}),Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"price",type:"text",value:y,onChange:function(e){return k(e.target.value)}}),Object($.jsx)("label",{htmlFor:"price",children:T.price})]})}),Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"stock",type:"text",value:P,onChange:function(e){return q(e.target.value)}}),Object($.jsxs)("label",{htmlFor:"stock",children:["$",T.price/100]})]})}),Object($.jsx)("button",{className:"btn green",onClick:function(){return E()},children:"Submit"}),Object($.jsx)("button",{className:"btn right red",onClick:Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({variables:{product_id:t}});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),children:"Delete Product"}),Object($.jsx)(Z.a,{onDrop:function(){var e=Object(f.a)(v.a.mark((function e(t){var n,c,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(N.a)(t,1),c=n[0],(a=new FormData).append("api_key","767632178961832"),a.append("file",c),a.append("tags","codeinfuse, medium, gist"),a.append("upload_preset","re5zmdqn"),r=Date.now()/1e3|0,a.append("timestamp","".concat(r)),te.a.post("https://api.cloudinary.com/v1_1/desimqzzy/image/upload",a,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){A.push(e.data.secure_url)})).catch((function(e){M.toast({html:"An Error occured, please try again later."}),console.log("error",e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object($.jsxs)("div",Object(_.a)(Object(_.a)({},t()),{},{children:[Object($.jsx)("input",Object(_.a)({},n())),"Click me to add a photo"]}))}})]})]})},de=function(){var e,t=I.useQuery(G,e),n=t.data;return t.loading?Object($.jsx)($.Fragment,{children:"...loading"}):(console.log("data :>> ",n),Object($.jsx)("div",{className:"container",children:Object($.jsxs)("table",{children:[Object($.jsx)("thead",{children:Object($.jsxs)("tr",{children:[Object($.jsx)("th",{children:"Order ID"}),Object($.jsx)("th",{children:"Tracking Number"}),Object($.jsx)("th",{children:"Products Ordered"})]})}),Object($.jsx)("tbody",{children:n.getOrders.map((function(e,t){var c=null===n||void 0===n?void 0:n.getOrders[t];return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:null===c||void 0===c?void 0:c.order_id}),Object($.jsx)("td",{children:null===c||void 0===c?void 0:c.tracking_num}),Object($.jsx)("td",{children:null===c||void 0===c?void 0:c.products.map((function(e,t){return Object($.jsx)("div",{className:"row",children:c.products[t].name})}))})]})}))})]})}))},le=(n(136),function(){var e,t=I.useQuery(V,e),n=t.data;return t.loading?Object($.jsx)($.Fragment,{children:"...loading"}):(console.log("data",n),Object($.jsxs)("div",{className:"container",style:{marginTop:"50px"},children:[Object($.jsx)("nav",{className:"z-depth-0 black-text ",style:{backgroundColor:"transparent"},children:Object($.jsxs)("div",{className:"nav-wrapper",children:[Object($.jsx)("h5",{className:"left",style:{marginBottom:"48px",marginLeft:"16px",marginRight:"16px",fontWeight:"bold",fontSize:"26px",color:"#14161a"},children:"Products"}),Object($.jsx)("ul",{className:"right",children:Object($.jsx)("li",{children:Object($.jsx)("a",{href:"#/add-products",children:Object($.jsx)("i",{className:"material-icons black-text",children:"add"})})})})]})}),Object($.jsx)("div",{className:"products-grid",children:null===n||void 0===n?void 0:n.getProducts.map((function(e,t){var c=n.getProducts[t];return Object($.jsxs)("div",{className:"card",style:{margin:"0px 16px 32px 16px"},children:[Object($.jsxs)("div",{className:"card-image",children:[c.images[0].img_url?Object($.jsx)("img",{src:c.images[0].img_url,style:{maxHeight:"280px"}}):Object($.jsx)("img",{src:"https://materializecss.com/images/sample-1.jpg"}),Object($.jsx)("a",{href:"#/edit-product:".concat(c.product_id),className:"btn-floating btn-large halfway-fab large blue-grey darken-4",children:Object($.jsx)("i",{className:" large material-icons",children:"edit"})})]}),Object($.jsxs)("div",{className:"card-content",children:[Object($.jsx)("span",{className:"card-title",children:c.name}),Object($.jsxs)("p",{className:"product-price",children:["$",Number(c.price/100).toFixed(2)]}),Object($.jsx)("p",{children:c.desc})]})]},t)}))})]}))}),ue=function(){return Object($.jsxs)(S.d,{children:[Object($.jsx)(A,{exact:!0,path:"/orders",component:de}),Object($.jsx)(A,{exact:!0,path:"/products",component:le}),Object($.jsx)(A,{exact:!0,path:"/add-products",component:ne}),Object($.jsx)(A,{exact:!0,path:"/edit-product:id",component:oe}),Object($.jsx)(A,{exact:!0,path:"/coupons",component:se}),Object($.jsx)(A,{exact:!0,path:"/announcements",component:re}),Object($.jsx)(S.b,{render:function(){return Object($.jsx)(S.a,{to:"/products"})}})]})},je=function(){var e,t=Object(w.useState)(""),n=Object(N.a)(t,2),c=n[0],a=n[1],r=Object(w.useState)(""),s=Object(N.a)(r,2),i=s[0],o=s[1],d=I.useMutation(H,e),l=Object(N.a)(d,1)[0],u=function(){var e=Object(f.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({variables:{username:c,password:i}});case 3:t=e.sent,console.log("res :>> ",t),t&&t.data&&(n=t.data.apiLogin.accessToken,k(n),localStorage.setItem("urd",t.data.apiLogin.refreshToken),window.location.reload()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),ae.a.toast({html:"Failed Login"}),ae.a.toast({html:"server is likely down"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object($.jsx)("div",{className:"login-wrapper",style:{backgroundColor:"#000",minHeight:"100vh",minWidth:"100vw"},children:Object($.jsx)("div",{className:"container",children:Object($.jsx)("div",{className:"row",children:Object($.jsx)("div",{className:"col s12",children:Object($.jsx)("div",{className:"card",children:Object($.jsx)("div",{className:"card-content",children:Object($.jsxs)("div",{children:[Object($.jsx)("h5",{className:"center-align",children:"Login"}),Object($.jsxs)("form",{children:[Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"username",type:"text",value:c,onChange:function(e){return a(e.target.value)}}),Object($.jsx)("label",{htmlFor:"username",children:"Username"})]})}),Object($.jsx)("div",{className:"row",children:Object($.jsxs)("div",{className:"input-field",children:[Object($.jsx)("input",{id:"password",type:"password",value:i,onChange:function(e){return o(e.target.value)}}),Object($.jsx)("label",{htmlFor:"password",children:"Password"})]})}),Object($.jsx)("div",{className:"row",style:{display:"flex",justifyContent:"center"},children:Object($.jsx)("button",{className:"btn",style:{minWidth:"150px",backgroundColor:"#4285f4",color:"#fff"},onClick:function(){return u()},children:"Login"})})]})]})})})})})})})},be=n(46),pe=function(){return Object($.jsx)(be.a,{children:Object($.jsx)("div",{className:"App",children:q()?Object($.jsx)(T,{children:Object($.jsx)(ue,{})}):Object($.jsxs)(S.d,{children:[Object($.jsx)(S.b,{exact:!0,path:"/login",component:je}),Object($.jsx)(S.b,{render:function(){return Object($.jsx)(S.a,{to:"/login"})}})]})})})},me="https://infinite-bayou-56493.herokuapp.com/",he=function(){var e=Object(w.useState)(!0),t=Object(N.a)(e,2),n=t[0],c=t[1];return Object(w.useEffect)((function(){var e=localStorage.getItem("urd");fetch("".concat(me,"/api_refresh_token"),{method:"POST",credentials:"include",headers:{refreshToken:e}}).then(function(){var e=Object(f.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,a=n.accessToken,r=n.refreshToken,k(a),localStorage.setItem("urd",r),c(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),n?Object($.jsx)($.Fragment,{children:"loading.."}):Object($.jsx)(pe,{})},Oe=n(96),xe=n(100),ge=n(23),ve=n(19),fe=n(102),Ne=n(99),we=n(101),ye=new xe.a({}),ke=new ge.a((function(e,t){return new ve.a((function(n){var c;return Promise.resolve(e).then((function(e){var t=C();e.setContext({headers:{authorization:t?"bearer ".concat(t):""}})})).then((function(){c=t(e).subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})})).catch(n.error.bind(n)),function(){c&&c.unsubscribe()}}))})),Ce=new Oe.a({link:ge.a.from([new we.a({accessTokenField:"accessToken",isTokenValidOrUndefined:function(){var e=C();if(!e)return!0;try{var t=Object(P.a)(e).exp;return!(Date.now()>=1e3*t)}catch(n){return!1}},fetchAccessToken:function(){return fetch("".concat(me,"/refresh_token"),{method:"POST",credentials:"include"})},handleFetch:function(e){k(e)},handleError:function(e){console.warn("Your refresh token is invalid, Try to relogin"),console.error(e)}}),Object(Ne.a)((function(e){var t=e.graphQLErrors,n=e.networkError;console.log(t),console.log(n)})),ke,new fe.a({uri:"".concat(me,"/graphql"),credentials:"include"})]),cache:ye});x.a.render(Object($.jsx)(I.ApolloProvider,{client:Ce,children:Object($.jsx)(he,{})}),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.74380ad1.chunk.js.map